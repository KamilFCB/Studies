<!DOCTYPE html>
<html>
    <head>
        <title>Kurs WWW - Kamil Wo≈õ</title>
        <meta charset="UTF-8">
        <link rel="stylesheet" type="text/css" href="zadanie3.css">
        <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>  
        <script>
            $(document).ready( function() {
    var zaliczone = 0;
    var flaga = false;
    var start = false;
    var timer;
    
    $(".centrum").mouseleave(function(){
        czas_start();
    });
    
    $(".centrum").mouseenter(function()
    {
        czas_stop();
    });
    
    $(".cel1").mouseenter(function()
    {
      zalicz("cel1");
    });
    
    $(".cel2").mouseenter(function()
    {
      zalicz("cel2");
    });
    
    $(".cel3").mouseenter(function()
    {
      zalicz("cel3");
    });
    
    $(".cel4").mouseenter(function()
    {
      zalicz("cel4");
    });

    $(".cel5").mouseenter(function()
    {
      zalicz("cel5");
    });
    
    
    
function random()
{
    rand1 = Math.floor((Math.random() * 35) + 35);
    rand2 = Math.floor((Math.random() * 10) + 20);
    $("#cel1").css('bottom', rand1+"%");
    $("#cel1").css('left', rand2+"%");
    
    rand1 = Math.floor((Math.random() * 25) + 35);
    rand2 = Math.floor((Math.random() * 10) + 65);
    $("#cel2").css('bottom', rand1+"%");
    $("#cel2").css('left', rand2+"%");
    
    rand1 = Math.floor((Math.random() * 15) + 20);
    rand2 = Math.floor((Math.random() * 20) + 40);
    $("#cel3").css('bottom', rand1+"%");
    $("#cel3").css('left', rand2+"%");
    
    rand1 = Math.floor((Math.random() * 10) + 75);
    rand2 = Math.floor((Math.random() * 10) + 60);
    $("#cel4").css('bottom', rand1+"%");
    $("#cel4").css('left', rand2+"%");
    
    rand1 = Math.floor((Math.random() * 7) + 82);
    rand2 = Math.floor((Math.random() * 15) + 35);
    $("#cel5").css('bottom', rand1+"%");
    $("#cel5").css('left', rand2+"%");
}
    
    
    function czas_start()
    {
        if (zaliczone < 5 && !start)
        {
            start = true;
            timer = setInterval(function ()
            {
                czas = $("#wynik").html();                
                czas = parseInt(czas);
                czas++;
                $("#wynik").html(""+czas);
            }, 1000);
        }
    }
    function czas_stop()
    {
        if (flaga)
        {
            zaliczone++;
            flaga = false;
            if (zaliczone == 5) {
                element = document.createElement("LI");
                element.innerHTML = $("#wynik").html() + "s";
                $("#wyniki").append(element);
                $("#wynik").html(0);
                for (i = 1; i <= 5; i++) {
                    tmp = ".cel" + i;
                    $(tmp).css('background-color', 'aliceblue');
                }
                clearInterval(timer);
                zaliczone = 0;
                random();
                flaga = false;
                start = false;
            }
        }
    }
    function zalicz(id)
    {
        kolor = $("."+id).css('background-color');
        if (kolor == "rgb(255, 0, 0)" && !flaga && start)
        {
            tmp = $("#wynik").html();
            tmp = parseInt(tmp);
            tmp += 3;
            $("#wynik").html(tmp);
            return;
        }
        if (!flaga && start)
        {
            $("."+id).css('background-color', 'red');
            flaga = true;
        }
    }
});

        </script>
    </head>
    <body>
        <div class="container">
            <div class="centrum">
                <p id="czas">Czas: <span id="wynik">0</span>s</p>
            </div>
            <div class="cel1" id="cel1"></div>
            <div class="cel2" id="cel2"></div>
            <div class="cel3" id="cel3"></div>
            <div class="cel4" id="cel4"></div>
            <div class="cel5" id="cel5"></div>
        </div>
        Wyniki:
            <ul id="wyniki">
                    
             </ul>
    </body>
</html>